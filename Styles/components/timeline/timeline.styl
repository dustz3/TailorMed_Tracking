// Timeline Component Styles
// Timeline 元件樣式

.timeline-content
  display flex
  flex-direction column
  gap 2rem
  margin-top 20px

// Timeline 標題和描述
.timeline-title
  font-size 1.75rem
  font-weight 600
  color primary-color
  margin 0

.timeline-description
  font-size 0.95rem
  color neutral-gray
  margin 0

// Timeline 視覺容器
.timeline-visual
  position relative
  padding 20px 0px 30px
  margin 0
  width 100%

// Timeline 追蹤容器（Mobile 用於對位）
.timeline-track
  display none

// 事件容器（用於絕對定位事件）
.timeline-events
  position absolute
  top 0
  left 0
  width 100%
  height 100%

// 連接線（在節點下方）
.timeline-connector
  position absolute
  left 0
  right 0
  width 88%
  top 0
  height 100%
  z-index 0
  margin 0 auto
  
  // 主線段（4px 粗細）
  &::before
    content ''
    position absolute
    left 0
    top 37%
    transform translateY(-50%)
    width 100%
    height 4px
    background linear-gradient(to right, #dfeaf3 70%)
    z-index 1
  
  // 漸層 bar
  &::after
    content ''
    position absolute
    left 0
    top 37%
    transform translateY(-50%)
    width 10%
    height 4px
    background linear-gradient(to right, primary-color, accent-color)
    border-radius 25%
    z-index 2

// 節點容器
.timeline-nodes-container
  display flex
  gap 2rem
  flex-wrap wrap
  justify-content space-around
  position relative
  z-index 2
  
.timeline-node
  display flex
  flex-direction column
  align-items center
  text-align center
  
  // 上：日期
  .node-date
    display inline-flex
    align-items center
    gap 4px
    
    .month,
    .day
      font-size 1.1rem
      font-weight bold
      color primary-color
      white-space nowrap
  
  // 中：節點 icon
  .node-icon
    
    .node-circle
      width 40px
      height 40px
      background primary-color
      border-radius 50%
      border 2px solid #fff
      position relative
      z-index 6
      transition all 0.3s ease
      
      // 內層白色圓圈
      &::before
        content ''
        position absolute
        top 50%
        left 50%
        transform translate(-50%, -50%)
        width 24px
        height 24px
        background #fff
        border-radius 50%
        z-index 1
      
      // Check 圖標 (使用 ::after 偽元素)
      &::after
        content ''
        position absolute
        top 50%
        left 50%
        transform translate(-50%, -50%)
        width 10px
        height 10px
        background-image url('../images/icon-check.svg')
        background-size contain
        background-repeat no-repeat
        background-position center
        z-index 2
        // 將 SVG 改為 primary-color
        filter brightness(0) saturate(100%) invert(20%) sepia(21%) saturate(1500%) hue-rotate(190deg) brightness(95%) contrast(100%)
      
      // Hover 效果
      &:hover
        transform scale(1.1)
        cursor pointer
        box-shadow 0 4px 12px rgba(20, 52, 99, 0.3) !important
        
        // Before 改為 primary-color
        &::before
          background primary-color
        
        // After icon 改為 #fff
        &::after
          filter brightness(0) invert(1)
  
  // 下：狀態跟時間
  .node-info
    display flex
    flex-direction column
    align-items center
    
    .node-status
      font-size 0.9rem
      font-weight 600
      color primary-color
      max-width 120px
      word-wrap break-word
      text-align center
      
    .node-time
      font-size 0.8rem
      font-weight 500
      color neutral-gray
      margin 0

// 第二、三個節點使用 accent-color
.timeline-nodes-container .timeline-node:nth-child(2),
.timeline-nodes-container .timeline-node:nth-child(3)
  .node-date
    .month, .day
      color accent-color
  
  .node-circle
    background accent-color
    
    // Hover 效果
    &:hover
      transform scale(1.1)
      cursor pointer
      box-shadow 0 4px 12px rgba(187, 39, 73, 0.4) !important
      
      // Before 改為 accent-color
      &::before
        background accent-color
      
      // After icon 改為 #fff
      &::after
        filter brightness(0) invert(1)
  
  .node-info
    .node-status
      color accent-color
      position relative
      overflow hidden
      
      // Gradient shine 效果
      &::before
        content ''
        position absolute
        top 0
        left -100%
        width 100%
        height 100%
        background linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent)
        animation gradientShine 2s infinite
        pointer-events none
        z-index 1
        border-radius 2px

// 第二個節點使用 truck icon（第三個也是一樣）
.timeline-nodes-container .timeline-node:nth-child(2)
  .node-circle
    &::after
      content ''
      position absolute
      top 50%
      left 50%
      transform translate(-50%, -50%)
      width 16px
      height 13px
      background-image url('../images/icon-truck.svg')
      background-size contain
      background-repeat no-repeat
      background-position center
      z-index 2
      filter none

// 第三個節點使用 inTransit icon
.timeline-nodes-container .timeline-node:nth-child(3)
  .node-circle
    &::after
      content ''
      position absolute
      top 50%
      left 50%
      transform translate(-50%, -50%)
      width 16px
      height 13px
      background-image url('../images/icon-inTransit.svg')
      background-size contain
      background-repeat no-repeat
      background-position center
      z-index 2
      filter none
      animation floatY 2.2s ease-in-out infinite

// Gradient Shine 動畫效果
@keyframes gradientShine
  0%
    left -100%
    opacity 0
  50%
    opacity 1
  100%
    left 100%
    opacity 0

// In Transit 飛機上下飄動
@keyframes floatY
  0%
    transform translate(-50%, -50%) translateY(0)
  50%
    transform translate(-50%, -50%) translateY(-4px)
  100%
    transform translate(-50%, -50%) translateY(0)

// Order Completion Shine 動畫效果（track completion 專用）
// 前 2s 掃過，後 2s 靜止（總時長 4s）
@keyframes orderCompletionShine
  0%
    left -100%
    opacity 0
  10%
    opacity 1
  40%
    opacity 1
  50%
    left 100%
    opacity 0
  100%
    left 100%
    opacity 0

// TailorMed 標誌變色動畫（從淺藍到白）
// 前 2s 靜止，後 2s 播放變色（總時長 4s）
@keyframes tailormedGlow
  0%
    opacity 1
    filter brightness(1)
  50%
    opacity 1
    filter brightness(1)
  60%
    opacity 1
    filter brightness(1)
  80%
    opacity 1
    filter brightness(5)
  90%
    opacity 1
    filter brightness(5)
  100%
    opacity 1
    filter brightness(1)

// 第四個節點使用虛線邊框
.timeline-nodes-container .timeline-node:nth-child(4)
  .node-date
    .month, .day
      color #dfeaf3
      font-style italic
  
  .node-circle
    background #dfeaf3
    border 2px dashed #dfeaf3
    transition none !important
    
    // 內層圓圈 #fff 28x28px
    &::before
      content ''
      position absolute
      top 50%
      left 50%
      transform translate(-50%, -50%)
      width 28px
      height 28px
      background #fff
      border-radius 50%
      z-index 1
    
    // 移除 icon
    &::after
      display none
    
    // 移除 hover 效果
    &:hover
      transform none !important
      cursor default !important
      box-shadow none !important
      
      &::before
        background #fff
      
      &::after
        display none
  
  .node-info
    .node-status
      color #dfeaf3
    
    .node-time
      color #dfeaf3

// 第五個節點日期顏色改為 primary-color
.timeline-nodes-container .timeline-node:nth-child(5)
  .node-date
    .month, .day
      color primary-color
  
  .node-status
    color #222
  
  .node-circle
    // :before 改為 primary-color
    &::before
      background primary-color
    
    // :after 加大 40%，顏色改為 #fff
    &::after
      width 14px
      height 14px
      filter brightness(0) invert(1)
    
    // 移除 hover 效果
    &:hover
      transform none !important
      cursor default !important
      box-shadow none !important
      
      &::before
        background primary-color
      
      &::after
        filter brightness(0) invert(1)

// 第六個節點日期顏色改為 primary-color，circle 改為長方形
.timeline-nodes-container .timeline-node:nth-child(6)
  .node-date
    .month, .day
      color primary-color
  
  .node-info
    .node-status
      color #222
    
    .node-time
      color #666
  
  .node-circle
    width 58px
    height 40px
    border-radius 5px
    overflow hidden
    display flex
    align-items center
    justify-content center
    
    // :before 改為 primary-color + 光澤掃過動畫
    &::before
      content ''
      position absolute
      top 0
      left -100%
      width 100%
      height 100%
      background linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent)
      transform skewX(20deg)
      animation orderCompletionShine 4s infinite ease-out
      pointer-events none
      z-index 1
      border-radius 3px
    
    // :after 使用 tailormed-mark.svg + 變色動畫
    &::after
      content ''
      position absolute
      top 50%
      left 50%
      transform translate(-50%, -50%)
      width 38px
      height 18px
      background-image url('../images/tailormed-mark.svg')
      background-size contain
      background-repeat no-repeat
      background-position center
      z-index 2
      filter none
    
    // 移除 hover 效果
    &:hover
      transform none !important
      cursor default !important
      box-shadow none !important
      
      &::after
        filter none

// Processing 狀態使用 accent-color
.timeline-node--processing
  .node-date
    .month, .day
      color accent-color
      font-style normal
  
  .node-circle--processing
    background accent-color
  
  .node-info
    .node-status
      color accent-color

// Completed 狀態使用 primary-color
.timeline-node--completed
  .node-date
    .month, .day
      color primary-color
  
  .node-circle--completed
    background primary-color
  
  .node-info
    .node-status
      color primary-color

// Timeline Icon 說明容器
.timeline-icon-legend
  margin-top 2rem
  padding 1.5rem
  background #f8f9fa
  border-radius 8px
  
  .legend-items-container
    display grid
    grid-template-columns repeat(5, 1fr)
    gap 2rem
    row-gap 1rem
  
  .legend-item
    display flex
    align-items center
    gap 0.75rem
    flex 1
    min-width 0
    width 100%
    
    .legend-icon
      width 30px
      height 30px
      flex-shrink 0
      display flex
      align-items center
      justify-content center
      
      img
        width 80%
        height 100%
        object-fit contain
    
    .legend-text
      font-size 0.9rem
      color #999
      line-height 1.2
      flex 1
      min-width 0

// Mobile 響應式設計
@media (max-width: 768px)
  .timeline-content
    gap 1.5rem
  
  .timeline-title
    font-size 1.2rem
  
  .timeline-description
    font-size 0.9rem
  
  .timeline-visual
    padding 15px 0
    position relative
    width 100%
    margin 0 0 20px
    
  // Timeline 追蹤容器（Mobile 用於對位）
  .timeline-track
    display block
    position absolute
    top 0
    left 50%
    transform translateX(-50%)
    width 100%
    height 100%
    pointer-events none
    
    // 垂直連接線在左側
    &::before
      content ''
      position absolute
      left 21.3%
      top 9%
      width 8px
      height 83%
      background linear-gradient(to bottom, #dfeaf3 60%)
      z-index 0
      border-radius 15px
    
    // 漸層 bar
    &::after
      content ''
      position absolute
      left 21.3%
      top 9%
      width 8px
      height 10%
      background linear-gradient(to bottom, primary-color, accent-color)
      border-radius 15px
      z-index 1
    
  .timeline-connector
    display none
    
  .timeline-nodes-container
    flex-direction column
    gap 1.5rem
    position relative
    z-index 2
  
  .timeline-node
    flex-direction row
    align-items center
    text-align left
    gap 0
    width 100%
    margin-bottom 1.5rem
    
    // 最後一個節點不需要 margin
    &:last-child
      margin-bottom 0
    
    .node-date
      flex-direction column
      gap 2px
      padding-bottom 12px
      justify-content center
      align-items center
      width 12%
      margin-right 2%
      
      .month
        font-size 0.8rem
        font-weight normal
        
      .day
        font-size 1.4rem
        line-height 8px
    
    .node-icon
      width 17%
      display flex
      justify-content center
      align-items center
      flex-shrink 0
    
    .node-circle
      width 58px
      height 42px
      
      &::before
        width 44px
        height 44px
    
    .node-info
      flex 1
      align-items flex-start
      margin-top 4px
      margin-left 3%
      
      .node-status
        font-size 0.9rem
        max-width 100%
        text-align left
        letter-spacing -0.1px
      
      .node-time
        font-size 0.8rem
        margin-top -4px
  
  // 第 2、3 個節點（processing）在 mobile 上的樣式控制
  .timeline-nodes-container .timeline-node:nth-child(2),
  .timeline-nodes-container .timeline-node:nth-child(3)
    .node-date
      .day
        color #bb2749
        font-size 1rem
        letter-spacing -1.8px
        margin-top 11px
        font-style normal
  
  // 第 4 個節點（pending）在 mobile 上的樣式控制
  .timeline-nodes-container .timeline-node:nth-child(4)
    .node-date
      .month
      .day
        color #dfeaf3
        font-size 1rem
        letter-spacing -1.8px
        margin-top 6px
        font-style italic
    
  // 第 6 個節點在 mobile 上調整大小
  .timeline-nodes-container .timeline-node:nth-child(6)
    .node-icon
      width 58px
    
    .node-circle
      width 58px
      height 40px
      
      &::after
        width 38px
        height 18px

  // Timeline Icon 說明容器 Mobile 樣式
  .timeline-icon-legend
    margin-top 1.5rem
    padding 1rem
    
    .legend-items-container
      grid-template-columns 1fr
      gap 0.75rem
    
    .legend-item
      max-width none
      justify-content flex-start
      
      .legend-text
        font-size 0.85rem


// Timeline Track Component
// 時間軸軌道組件樣式

@import '../variables'

.timeline-track-panel
  width 100%
  max-width 1200px
  background base-white
  border-radius 16px
  box-shadow panel-shadow
  padding 40px 48px
  margin 0 auto 32px
  text-align center
  position relative
  z-index 10
  
  .panel-title
    font-size 1.75rem
    font-weight 600
    color primary-color
    margin 0 0 16px 0
    
  .panel-description
    font-size 1rem
    color neutral-gray
    margin 0 0 32px 0
    line-height 1.6
    
  .timeline-track-container
    width 100%
    min-height 200px 
    border-radius 12px
    padding 24px 
    position relative
    
    // Domestic Timeline (4 nodes) - 獨立樣式
    &.timeline-domestic
      .timeline-nodes
        left -16px
        right -16px
        justify-content space-between
        
      // Domestic 專用的分段式連接線
      .timeline-horizontal-line
        &::before
          content ''
          position absolute
          top 0
          left 0
          height 100%
          width 33.33%  // 1-2 節點之間 (33.33%)
          background linear-gradient(to right, primary-color, accent-color)
          z-index 2
          
        &::after
          content ''
          position absolute
          top -1px
          left 33.33%  // 從第2個節點開始
          height 100%
          width 66.67%  // 2-3-4 節點之間 (33.33% + 33.33%)
          background neutral-light
          border 1px solid neutral-light
          z-index 2
    
    // Import/Export Timeline (7 nodes + 2 events)
    &.timeline-import_export
      .timeline-nodes
        left -16px
        right -16px
        justify-content space-between
      
      .timeline-events
        position absolute
        top 50%
        left -16px
        right -16px
        height 16px
        transform translateY(-50%)
        z-index 4
    
    // Cross Trade Layered (3 layers with alignment)
    &.timeline-cross_trade_layered
      display flex
      flex-direction column
      gap 0
      
      // Origin 和 Destination 主容器 (100% 寬度)
      .timeline-main-layers
        width 100%
        display flex
        gap 0
      
      .timeline-layer
        position relative
        min-height 40px
        
        .timeline-horizontal-line
          position absolute
          top 50%
          left 0
          right 0
          height 2px
          background primary-color
          transform translateY(-50%)
          z-index 1
          
        .timeline-nodes
          position absolute
          top 50%
          height 32px
          transform translateY(-50%)
          display flex
          align-items center
          z-index 3
          
        .track-content
          position absolute
          top 100%
          left 0
          right 0
          margin-top 16px
          text-align center
          font-size 0.9rem
          font-weight 500
      
      // Origin 包裝器 (50% 寬度)
      .timeline-origin-wrapper
        width 50%
      
      // Origin 層 (綠色，4 節點)
      .timeline-origin-layer
        .timeline-nodes
          left -16px
          right -16px
          justify-content space-between
          
        .timeline-node.timeline-origin
          background primary-color
          border-color base-white
          
        .track-content
          color primary-color
      
      // Origin 階段獨立控制 (80%)
      .origin-stage
        width 80%
        
        .timeline-nodes
          left -16px
          right -16px
          justify-content space-between
      
      // Transit 層 (橙色，2 節點) - 對齊 Origin 的第4個和 Destination 的第1個
      .timeline-transit-layer
        .timeline-nodes
          left calc(75% - 16px)  // 對齊 Origin 第4個節點
          right calc(25% - 16px) // 對齊 Destination 第1個節點
          justify-content space-between
          
        .timeline-node.timeline-transit
          background primary-color
          border-color base-white
          
        .track-content
          color primary-color
      
      // Transit 階段獨立控制 (20%)
      .transit-stage
        width 20%
        margin 0 auto
        
        .timeline-nodes
          left -16px
          right -16px
          justify-content space-between
      
      // Destination 包裝器 (50% 寬度)
      .timeline-destination-wrapper
        width 50%
      
      // Destination 層 (藍色，4 節點)
      .timeline-destination-layer
        .timeline-nodes
          left -16px
          right -16px
          justify-content space-between
          
        .timeline-node.timeline-destination
          background primary-color
          border-color base-white
          
        .track-content
          color primary-color
      
      // Destination 階段獨立控制 (80%, 靠右)
      .destination-stage
        width 80%
        margin-left auto  // 靠右對齊
        
        .timeline-nodes
          left -16px
          right -16px
          justify-content space-between
    
    .timeline-horizontal-line
      position absolute
      top 50%
      left 0
      right 0
      height 2px
      background primary-color
      transform translateY(-50%)
      z-index 1
      
    .timeline-nodes
      position absolute
      top 50%
      height 32px
      transform translateY(-50%)
      display flex
      align-items center
      z-index 3
      
      
    .timeline-node
      width 32px
      height 32px
      background primary-color
      border-radius 50%
      border 2px solid base-white
      position relative
      flex-shrink 0
      display flex
      align-items center
      justify-content center
      
      // Completed 狀態 (預設)
      &.completed
        background primary-color
        
      // In Progress 狀態
      &.in-progress
        background primary-color
        border 2px solid warning-color
        box-shadow 0 0 8px rgba(255, 165, 0, 0.5)
        
      // Processing 狀態
      &.processing
        background accent-color
        
      // Pending 狀態
      &.pending
        background neutral-light
        
      &::before
        content ''
        position absolute
        top 50%
        left 50%
        width 10px
        height 10px
        background base-white
        border-radius 50%
        transform translate(-50%, -50%)
    
    // Event 節點樣式 (比原節點小 50%，定位在節點之間)
    .timeline-event
      width 16px
      height 16px
      background secondary-color
      border-radius 50%
      border 1px solid base-white
      position absolute
      top 50%
      transform translateY(-50%)
      z-index 4
      display flex
      align-items center
      justify-content center
      
      &::before
        content ''
        position absolute
        top 50%
        left 50%
        width 6px
        height 6px
        background base-white
        border-radius 50%
        transform translate(-50%, -50%)
      
      // Event 1: 定位在第2和第3節點之間 (25%位置)
      &:nth-child(1)
        left 25%
      
      // Event 2: 定位在第5和第6節點之間 (73.5%位置)
      &:nth-child(2)
        left 73.5%
      
    .track-content
      color neutral-gray
      font-style italic
      position relative
      z-index 2